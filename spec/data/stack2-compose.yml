---
version: '3.8'
services:
  svc1:
    environment:
      STACK_NAME: name1
      STACK_SERVICE_NAME: svc1
    image: service-image
    logging:
      driver: fluentd
      options:
        fluentd-address: fluentd2:24224
        fluentd-async: 'true'
  svc2:
    environment:
      STACK_NAME: name1
      STACK_SERVICE_NAME: svc2
    image: postgres:13.5-alpine
    command: bash -c "apk add curl && docker-entrypoint.sh -c \"shared_buffers=256MB\"
      -c \"max_connections=200\" "
    entrypoint: "/usr/bin/tini -- wait-for-it opensearch:9200 --  /docker-entrypoint.sh"
    logging:
      driver: fluentd
      options:
        fluentd-address: fluentd3:24224
        fluentd-async: 'true'
